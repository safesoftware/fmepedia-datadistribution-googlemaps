var FMEServer=(function(){var G=function(aa,ab,ag,ae,Z,ac){if(aa===undefined||(typeof aa==="object"&&aa.server===undefined)){var af="FMEServer.js Error.  You did not specify a server URL in your configuration paramaters.";if(window.console&&console.log){console.log(af)}else{alert(af)}return null}else{if(ab===undefined&&(typeof aa==="object"&&aa.token===undefined)){var af="FMEServer.js Error.  You did not specify a token in your configuration paramaters.";if(window.console&&console.log){console.log(af)}else{alert(af)}return null}}var Y={version:"v2"};if(typeof aa=="object"){Y.server=aa.server;Y.token=aa.token;Y.accept=aa.format||"json";Y.detail=aa.detail||"high";Y.port=aa.port||"80";Y.ssl=aa.ssl||false}else{Y.server=aa;Y.token=ab;Y.accept=ag||"json";Y.detail=ae||"high";Y.port=Z||"80";Y.ssl=ac||false}this._config=function(ah){ah=ah||null;if(ah){return Y[ah]}return Y};if(this._config("server").charAt(this._config("server").length-1)=="/"){Y.server=this._config("server").substr(0,this._config("server").length-1)}if(this._config("server").substring(0,4)!="http"){Y.server="http://"+this._config("server")}if(this._config("ssl")){Y.server=this._config("server").replace("http://","https://")}var ad=["80","443"];if(ad.indexOf(this._config("port"))===-1){Y.server=this._config("server")+":"+this._config("port")}this._returnObj=function(ah){return ah};this._ajax=function(ai,an,aj,am,al,ah){aj=aj||"GET";am=am||null;al=al||null;ah=ah||this._config("accept");var ak=new XMLHttpRequest();if(ai.indexOf("?")!=-1){ai+="&detail="+this._config("detail")+"&token="+this._config("token")}else{ai+="?detail="+this._config("detail")+"&token="+this._config("token")}ak.open(aj,ai,true);if(ah!==null){ak.setRequestHeader("Accept",ah)}if(al!==null&&al!="attachment"){ak.setRequestHeader("Content-type",al)}if(al=="attachment"){ak.setRequestHeader("Content-type","application/octet-stream");ak.setRequestHeader("Content-Disposition",'attachment; filename="'+am.name+'"');am=am.contents}ak.onreadystatechange=function(){var ao=4;if(ak.readyState==ao){var aq;try{aq=ak.responseText;if(aq.length===0&&ak.status==204){aq='{ "delete" : "true" }'}else{if(aq.length===0&&ak.status==202){aq='{ "value" : "true" }'}}aq=JSON.parse(aq)}catch(ap){aq=ak.response}finally{an(aq)}}};ak.send(am)};this._URL=function(ah){ah=ah.replace(/{{svr}}/g,this._config("server"));ah=ah.replace(/{{ver}}/g,this._config("version"));return ah};T()};function b(aa,Y,ac){ac=ac||this._returnObj;var Z=this._URL("{{svr}}/fmedataupload/"+aa+"/"+Y);var ab="opt_extractarchive=false&opt_pathlevel=3&opt_fullpath=true";this._ajax(Z,function(ad){ac(ad)},"POST",ab,"application/x-www-form-urlencoded")}function i(ab,aa){aa=aa||null;var Z;if(this._config("server").indexOf("https://")!=-1){Z=this._config("server").replace("https://","")}else{Z=this._config("server").replace("http://","")}var Y=new WebSocket("ws://"+Z+":7078/websocket");Y.onopen=function(){var ac={ws_op:"open",ws_stream_id:ab};Y.send(JSON.stringify(ac));if(aa!==null){aa()}};return Y}function w(aa,Y,ab,ac){ac=ac||this._returnObj;var Z=this._URL("{{svr}}/fmedatadownload/"+aa+"/"+Y);ab="opt_responseformat="+this._config("accept")+"&opt_showresult=true&"+ab;this._ajax(Z,function(ad){ac(ad)},"POST",ab,"application/x-www-form-urlencoded")}function B(ah,ac,Y,ag,aj){aj=aj||this._returnObj;ag=ag||null;var Z=this._URL("{{svr}}/fmedataupload/"+ah+"/"+ac);if(ag!==null){Z+=";jsessionid="+ag}if(!FormData){var ab=parseInt(Math.random()*100000000);var ae=document.createElement("iframe");ae.id=ab+"-frame";ae.name=ab;ae.style.display="none";document.body.appendChild(ae);var aa=document.createElement("form");aa.action=Z;aa.method="POST";aa.enctype="multipart/form-data";var ai=Y.cloneNode(true);ai.name="files[]";ai.files=Y.files;aa.appendChild(ai);aa.target=ab;aa.id=ab+"-form";aa.style.display="none";document.body.appendChild(aa);aa.submit();aj({submit:true,id:ab})}else{var ad=new FormData();for(var af=0;af<Y.files.length;af++){ad.append("files[]",Y.files[af])}this._ajax(Z,function(ak){aj(ak)},"POST",ad)}}function m(ab,Z,Y,ac){ac=ac||this._returnObj;Y=Y||null;var aa=this._URL("{{svr}}/fmedataupload/"+ab+"/"+Z+";jsessionid="+Y);this._ajax(aa,function(ad){ac(ad)})}function k(ac,ad,ae){ae=ae||this._returnObj;ac=ac||null;var Z=this._URL("{{svr}}/fmedatadownload/"+repository+"/"+workspace+"?");var aa=ad.files;var Y=ad.params;ad=ad.filename+"=%22%22";for(var ab in aa){ad+=ac+"/"+aa[ab].name+"%22%20%22"}ad+="&"+Y+"&opt_responseformat=json";this._ajax(Z+ad,function(af){ae(af)})}function c(Z){Z=Z||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/repositories");this._ajax(Y,function(aa){Z(aa)})}function A(aa,Z,ab){Z=Z||"";ab=ab||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/repositories/"+aa+"/items?type="+Z);this._ajax(Y,function(ac){ab(ac)})}function H(aa,Y,ab){ab=ab||this._returnObj;var Z=this._URL("{{svr}}/fmerest/{{ver}}/repositories/"+aa+"/items/"+Y+"/parameters");this._ajax(Z,function(ac){ab(ac)})}function n(Y,ak){var Z=document.getElementById(Y);for(var ac=0;ac<ak.length;ac++){var aa=ak[ac];var ag=document.createElement("label");ag.innerHTML=aa.description;Z.appendChild(ag);var ab;if(aa.type==="FILE_OR_URL"){ab=document.createElement("input");ab.type="file";ab.name=aa.name}else{if(aa.type==="LISTBOX"){ab=document.createElement("div");var al=aa.listOptions;for(var af=0;af<al.length;af++){var ad=al[af];var ae=document.createElement("input");ae.type="checkbox";ae.value=ad.value;ae.name=aa.name;ab.appendChild(ae);var aj=document.createElement("label");aj.innerHTML=ad.caption;ab.appendChild(aj)}}else{if(aa.type==="LOOKUP_CHOICE"||aa.type==="STRING_OR_CHOICE"||aa.type==="CHOICE"){ab=document.createElement("select");ab.name=aa.name;var al=aa.listOptions;for(var af=0;af<al.length;af++){var ad=al[af];var ai=document.createElement("option");ai.innerHTML=ad.caption;ai.value=ad.value;ab.appendChild(ai)}}else{if(aa.type==="TEXT_EDIT"){ab=document.createElement("textarea");ab.name=aa.name}else{if(aa.type=="INTEGER"){ab=document.createElement("input");ab.type="number";ab.name=aa.name}else{if(aa.type=="PASSWORD"){ab=document.createElement("input");ab.type="password";ab.name=aa.name}else{ab=document.createElement("input");ab.value=aa.defaultValue;ab.name=aa.name}}}}}}Z.appendChild(ab);var ah=document.createElement("br");Z.appendChild(ah)}}function g(Z){Z=Z||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/schedules");this._ajax(Y,function(aa){Z(aa)})}function l(aa,Z,ab){ab=ab||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/schedules/"+aa+"/"+Z);this._ajax(Y,function(ac){ab(ac)})}function U(aa,Z,ac){ac=ac||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/schedules/"+aa+"/"+Z+"/enabled");var ab="value=true";this._ajax(Y,function(ad){ac(ad)},"PUT",ab,"application/x-www-form-urlencoded")}function z(aa,Z,ac){ac=ac||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/schedules/"+aa+"/"+Z+"/enabled");var ab="value=false";this._ajax(Y,function(ad){ac(ad)},"PUT",ab,"application/x-www-form-urlencoded")}function I(aa,Z,ac,ad){ad=ad||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/schedules/"+aa+"/"+Z);var ab=JSON.stringify(ac);this._ajax(Y,function(ae){ad(ae)},"PUT",ab,"application/json")}function v(aa,Z,ab){ab=ab||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/schedules/"+aa+"/"+Z);this._ajax(Y,function(ac){ab(ac)},"DELETE")}function p(aa,ab){ab=ab||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/schedules");var Z=JSON.stringify(aa);this._ajax(Y,function(ac){ab(ac)},"POST",Z,"application/json")}function W(Z){Z=Z||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/publications");this._ajax(Y,function(aa){Z(aa)})}function N(Z,aa){aa=aa||this._returnObj;Z=encodeURIComponent(Z).replace(/%20/g,"+");var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/publications/"+Z);this._ajax(Y,function(ab){aa(ab)})}function f(Y,ab){ab=ab||this._returnObj;var Z=this._URL("{{svr}}/fmerest/{{ver}}/notifications/publications");var aa=JSON.stringify(Y);this._ajax(Z,function(ac){ab(ac)},"POST",aa,"application/json")}function Q(aa,Y,ac){ac=ac||this._returnObj;aa=encodeURIComponent(aa).replace(/%20/g,"+");var Z=this._URL("{{svr}}/fmerest/{{ver}}/notifications/publications/"+aa);var ab=JSON.stringify(Y);this._ajax(Z,function(ad){ac(ad)},"PUT",ab,"application/json")}function K(Z,aa){aa=aa||this._returnObj;Z=encodeURIComponent(Z).replace(/%20/g,"+");var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/publications/"+Z);this._ajax(Y,function(ab){aa(ab)},"DELETE")}function X(Z){Z=Z||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/publishers/");this._ajax(Y,function(aa){Z(aa)})}function P(Z,aa){aa=aa||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/publishers/"+Z);this._ajax(Y,function(ab){aa(ab)})}function S(Z){Z=Z||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/subscriptions");this._ajax(Y,function(aa){Z(aa)})}function O(Z,aa){aa=aa||this._returnObj;Z=encodeURIComponent(Z).replace(/%20/g,"+");var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/subscription/"+Z);this._ajax(Y,function(ab){aa(ab)})}function R(Z,ab){ab=ab||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/subscriptions");var aa=JSON.stringify(Z);this._ajax(Y,function(ac){ab(ac)},"POST",aa,"application/json")}function h(Z,aa,ac){ac=ac||this._returnObj;Z=encodeURIComponent(Z).replace(/%20/g,"+");var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/subscription/"+Z);var ab=JSON.stringify(aa);this._ajax(Y,function(ad){ac(ad)},"PUT",ab,"application/json")}function j(Z,aa){aa=aa||this._returnObj;Z=encodeURIComponent(Z).replace(/%20/g,"+");var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/subscriptions/"+Z);this._ajax(Y,function(ab){aa(ab)},"DELETE")}function r(Z){Z=Z||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/subscribers/");this._ajax(Y,function(aa){Z(aa)})}function e(Z,aa){aa=aa||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/subscribers/"+Z);this._ajax(Y,function(ab){aa(ab)})}function D(Z){Z=Z||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/topics");this._ajax(Y,function(aa){Z(aa)})}function M(Z,aa){aa=aa||this._returnObj;Z=encodeURIComponent(Z);var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/topics"+Z);this._ajax(Y,function(ab){aa(ab)})}function q(Z,aa,ac){ac=ac||this._returnObj;Z=encodeURIComponent(Z).replace(/%20/g,"+");aa=encodeURIComponent(aa).replace(/%20/g,"+");var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/topics");var ab="name="+Z+"&description="+aa;this._ajax(Y,function(ad){ac(ad)},"POST",ab,"application/x-www-form-urlencoded")}function u(Z,aa,ac){ac=ac||this._returnObj;Z=encodeURIComponent(Z);aa=encodeURIComponent(aa).replace(/%20/g,"+");var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/topics"+Z);var ab="description="+aa;this._ajax(Y,function(ad){ac(ad)},"PUT",ab,"application/x-www-form-urlencoded")}function y(Z,aa){aa=aa||this._returnObj;Z=encodeURIComponent(Z);var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/topics"+Z);this._ajax(Y,function(ab){aa(ab)},"DELETE",null,"application/x-www-form-urlencoded")}function E(Z,ad,aa,ae){ae=ae||this._returnObj;Z=encodeURIComponent(Z);aa=aa.toLowerCase()||"json";var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/topics/"+Z+"/message/map");if(aa=="xml"){aa="application/xml"}else{aa="application/json";try{ad=JSON.parse(ad);ad=JSON.stringify(ad)}catch(ac){var ab={message:"Unable to parse JSON"};ae(ab);return false}}this._ajax(Y,function(af){ae(af)},"POST",ad,aa)}function C(Z,aa,ab){ab=ab||this._returnObj;Z=encodeURIComponent(Z);var Y=this._URL("{{svr}}/fmerest/{{ver}}/notifications/topics/"+Z+"/message/raw");this._ajax(Y,function(ac){ab(ac)},"POST",aa,"*/*")}function d(Y,aa,ac){ac=ac||this._returnObj;var Z=this._URL("{{svr}}/fmetoken/service/view.json");var ab="user="+Y+"&password="+aa;this._ajax(Z,function(ad){ac(ad)},"POST",ab,"application/x-www-form-urlencoded")}function t(Y,aa,ac,ab,ae){ae=ae||this._returnObj;var Z=this._URL("{{svr}}/fmetoken/service/generate");var ad="user="+Y+"&password="+aa+"&expiration="+ac+"&timeunit="+ab;this._ajax(Z,function(af){ae(af)},"POST",ad,"application/x-www-form-urlencoded")}function L(aa,Y,ab,ac){ac=ac||this._returnObj;var Z=this._URL("{{svr}}/fmerest/{{ver}}/transformations/commands/submit/"+aa+"/"+Y);ab=JSON.stringify(ab);this._ajax(Z,function(ad){ac(ad)},"POST",ab,"application/json")}function x(aa,Y,ab,ac){ac=ac||this._returnObj;var Z=this._URL("{{svr}}/fmerest/{{ver}}/transformations/commands/transact/"+aa+"/"+Y);ab=JSON.stringify(ab);this._ajax(Z,function(ad){ac(ad)},"POST",ab,"application/json")}function s(Z){Z=Z||this._returnObj;var Y=this._URL("{{svr}}/fmerest/{{ver}}/resources");this._ajax(Y,function(aa){Z(aa)})}function a(Z,aa,ab){ab=ab||this._returnObj;aa=encodeURIComponent(aa).replace(/%2F/g,"/");var Y=this._URL("{{svr}}/fmerest/{{ver}}/resources/"+Z+"/filesys"+aa);this._ajax(Y,function(ac){ab(ac)})}function o(Z,aa,ab){ab=ab||this._returnObj;aa=encodeURIComponent(aa).replace(/%2F/g,"/");var Y=this._URL("{{svr}}/fmerest/{{ver}}/resources/"+Z+"/filesys"+aa);this._ajax(Y,function(ac){ab(ac)},"DELETE")}function V(aa,ab){ab=encodeURIComponent(ab).replace(/%2F/g,"/");var Y=this._URL("{{svr}}/fmerest/{{ver}}/resources/"+aa+"/filesys"+ab+"?accept=contents");var Z=document.createElement("iframe");Z.style.display="none";document.body.appendChild(Z);Z.src=Y+"&token="+this._config("token")}function J(ab,ac,ad,ae,Z,aa){ae=ae||this._returnObj;Z=Z||false;aa=aa||false;ac=encodeURIComponent(ac).replace(/%2F/g,"/");var Y=this._URL("{{svr}}/fmerest/{{ver}}/resources/"+ab+"/filesys"+ac);Y=Y+"?createDirectories="+aa+"&overwrite="+Z+"&type=FILE";this._ajax(Y,function(af){ae(af)},"POST",ad,"attachment")}function F(Y,Z,ac,ab,aa){ac=ac||this._returnObj;ab=ab||null;Z=Z.toUpperCase();aa=aa||null;this._ajax(Y,function(ad){ac(ad)},Z,ab,aa)}function T(){G.prototype.getSession=b;G.prototype.getWebSocketConnection=i;G.prototype.runDataDownload=w;G.prototype.dataUpload=B;G.prototype.getDataUploads=m;G.prototype.runWorkspaceWithData=k;G.prototype.getRepositories=c;G.prototype.getRepositoryItems=A;G.prototype.getWorkspaceParameters=H;G.prototype.generateFormItems=n;G.prototype.getSchedules=g;G.prototype.getScheduleItem=l;G.prototype.enableScheduleItem=U;G.prototype.disableScheduleItem=z;G.prototype.replaceScheduleItem=I;G.prototype.removeScheduleItem=v;G.prototype.createScheduleItem=p;G.prototype.getAllPublications=W;G.prototype.getPublication=N;G.prototype.createPublication=f;G.prototype.updatePublication=Q;G.prototype.deletePublication=K;G.prototype.getPublisherProtocols=X;G.prototype.queryPublisherProtocol=P;G.prototype.getAllSubscriptions=S;G.prototype.getSubscription=O;G.prototype.createSubscription=R;G.prototype.updateSubscription=h;G.prototype.deleteSubscription=j;G.prototype.getSubscriberProtocols=r;G.prototype.querySubscriberProtocol=e;G.prototype.getNotificationTopics=D;G.prototype.getNotificationTopic=M;G.prototype.publishToTopicStructured=E;G.prototype.publishToTopic=C;G.prototype.createTopic=q;G.prototype.updateTopic=u;G.prototype.deleteTopic=y;G.prototype.lookupToken=d;G.prototype.generateToken=t;G.prototype.submitJob=L;G.prototype.submitSyncJob=x;G.prototype.getResources=s;G.prototype.getResourceDetails=a;G.prototype.deleteResource=o;G.prototype.downloadResourceFile=V;G.prototype.uploadResourceFile=J;G.prototype.customRequest=F}return G}());